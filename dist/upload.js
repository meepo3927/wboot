webpackJsonp([1],{12:function(e,t,i){var n=i(1)(i(34),i(63),function(e){i(74)},"data-v-7dfd1f1c",null);e.exports=n.exports},15:function(e,t,i){(function(e){new e({el:"#main",components:{"v-main":i(12)}})}).call(t,i(3))},22:function(e,t,i){var n="";try{n="production"}catch(e){n="production"}var r="production"===n,a=(window.global||{}).basePath||"";if(r)var s=a;else s=a+"/mock";e.exports={env:n,basePath:a,user:{},ajaxUrlBase:s,mock:!r,isProduction:r}},23:function(e,t,i){var n=i(5),r=n.noop,a=1,s={dataType:"json"};function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.$form=e,this.options=n.extend(!0,{},s,t)}var l=o.prototype;l.init=function(){this.$form.attr({method:"POST",enctype:"multipart/form-data"})},l.send=function(){this.makeIframe(),this.$form.submit(),this.startFetch()},l.handleContent=function(e,t){if(!e)return this.handleError(t);var i=this.options.success||r,n=this.options.error||r;"json"===this.options.dataType?e&&t?i(t):n(t):e?i(e):n(t)},l.handleError=function(e){(this.options.error||r)(e)},l.makeIframe=function(){this.removeIframe();var e="form-async-prefix-"+a++;this.$iframe=n('<iframe name="'+e+'" src="about:blank" style="display: none;"></iframe>'),this.$iframe.insertAfter(this.$form),this.$form.attr("target",e)},l.removeIframe=function(){this.$iframe&&(this.$iframe.remove(),this.$iframe=null)},l.startFetch=function(){var i=this;!function e(i,n){if(!i)return null;if((n=n||function(){}).is_iframe_fetch_callback)var r=n;else(r=function(e){if(!r.called){if(r.called=!0,i.onload=null,e instanceof Error)return n("",e);try{var t=JSON.parse(e)}catch(e){t=null}return n(e,t)}}).is_iframe_fetch_callback=!0;var t=function(){return e.call(null,i,r)},a=function(){try{var e=i.contentWindow.document;return!!e&&"uninitialized"!==e.readyState&&"loading"!==e.readyState&&null!==e.body&&(e.body.textContent||e.body.innerText)}catch(e){return e}};i.onload=function(){r(a())};var s=a();return s?r(s):setTimeout(t,100)}(this.$iframe[0],function(e,t){i.handleContent(e,t),i.removeIframe()})},l.isPending=function(){return!!this.$iframe},e.exports=function(e,t){var i=void 0;return(i=e.jquery?new o(e,t):new o(n(e),t)).init(),i}},24:function(u,e,d){(function(i){var e=d(23),t=d(22),n=1,r={image:"jpg,png,jpeg,gif",excel:"xlsx,xls"},a={image:"图片",excel:"Excel"},s=void 0!==window.FileReader,o=function(e){return"请选择["+(t=(t=e)?t.toLowerCase():"",a[t]||t)+"]类型的文件";var t},l=function(e,t,i){var n={ok:!0};if(!t)return n;if(e.files&&0===e.files.length)return n;e.files&&e.files[0];return function(e,t){var i={ok:!1,errmsg:o(e)};if(-1===t.indexOf("."))return i;var n=t.split(".").pop();return n&&0<=(r[e]||"").toLowerCase().split(",").indexOf(n)?{ok:!0}:i}(t,i)},c={removeFileInput:function(){var e=i(this.$refs.form).children(".v-file");e.length&&e.remove()},makeFileInput:function(){var t=this,e=i('<input type="file" class="v-file" />');e.css("display","none"),e.attr("id",this.elemId),e.attr("name",this.myElemName),e.on("change",function(e){t.change(e)}),i(this.$refs.form).append(e)},getFileInputElem:function(){return i(this.$refs.form).children(".v-file")[0]},reset:function(){this.fileValue="",this.filePath="",this.errmsg="",this.removeFileInput(),this.makeFileInput()},checkType:function(e){if(!(e=e||this.getFileInputElem()))return!0;var t=l(e,this.filetype,this.file);return!!t.ok||t.errmsg},change:function(e){var t=e.target||e.currentTarget,i=t.value;this.filePath=i;var n=this.checkType(t);return!0!==n?(this.fileValue="",this.errmsg=n,!1):!!i&&(this.fileValue=i,void(this.checkNull()&&(this.errmsg="",this.sendOnSelect&&this.send())))},preview:function(e){var t=this;if(!e)return!1;var i=e[0];if(!i)return!1;if(!s)return!1;var n=new window.FileReader;n.onload=function(){t.$emit("preview",n.result)},n.readAsDataURL(i)},checkNull:function(){return!!this.fileValue||"请上传文件"},check:function(){if(this.silent)return!0;var e=this.checkType();return!0!==e?(this.errmsg=e,!1):!0!==(e=this.checkNull())?(this.errmsg=e,!1):!(this.errmsg="")},checkAndSend:function(){if(this.loading)return!1;if(!this.filePath)return!(this.errmsg="请选择文件");var e=this.checkType();return!0!==e?(this.errmsg=e,!1):this.send()},send:function(){var t=this;this.loading=!0,e(this.$refs.form,{success:function(e){t.loading=!1,t.$emit("success",e),e.success&&t.$emit("input",e.data)},error:function(){t.loading=!1,t.fileValue="",t.errmsg="上传失败"}}).send()}},f={elemId:function(){return"v_file_upload_"+this.id},myText:function(){return this.loading?"上传中..":this.labelText||"选择文件"},myElemName:function(){return this.elemName||"file"},file:function(){return this.filePath?this.filePath.split("\\").pop().split("/").pop():""},formAction:function(){return this.action||t.uploadUrl},errmsgVisible:function(){return!!this.errmsg},openFileVisible:function(){return!this.errmsgVisible&&!!this.value},selectBtnVisible:function(){return!this.sendBtnVisible},sendBtnVisible:function(){return!this.loading&&!!this.filePath}};u.exports={data:function(){return{id:n++,fileValue:"",filePath:"",errmsg:"",loading:!1}},methods:c,computed:f,props:["labelText","elemName","filetype","silent","action","sendOnSelect","value"],mounted:function(){this.makeFileInput()},beforeDestroy:function(){}}}).call(e,d(5))},34:function(e,t,i){e.exports={data:function(){return{}},created:function(){},methods:{},computed:{},watch:{},props:[],mounted:function(){},mixins:[],beforeDestroy:function(){},components:{"file-upload":i(47)}}},35:function(e,t,i){(e.exports=i(0)()).push([e.i,".v-file-upload[data-v-03aeed0e]{display:table;table-layout:fixed}.v-file-upload>label[data-v-03aeed0e]{display:table-cell;vertical-align:middle;height:32px;line-height:32px}.v-file-upload>em[data-v-03aeed0e]{display:table-cell;width:8px}.v-file-upload .error-msg[data-v-03aeed0e]{color:#e00;line-height:32px}.v-file-name[data-v-03aeed0e]{min-width:200px;padding-right:10px}.v-file-name>div[data-v-03aeed0e]{height:32px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;display:block}.send-btn[data-v-03aeed0e],.v-file-label[data-v-03aeed0e],.v-file-name>div[data-v-03aeed0e]{border:1px solid #eee;background-color:#eee;color:#333;cursor:pointer;white-space:nowrap;border-radius:3px}.send-btn[data-v-03aeed0e],.v-file-label[data-v-03aeed0e]{border:1px solid #eee;width:90px;text-align:center;background-color:#aaa;color:#fff}.send-btn[data-v-03aeed0e]{height:32px;background-color:#5faee3;border-color:#49a3df}.open-file[data-v-03aeed0e]{margin-left:12px;line-height:32px}",""])},4:function(e,t){e.exports=dll},43:function(e,t,i){(e.exports=i(0)()).push([e.i,".test-upload[data-v-7dfd1f1c]{padding-left:15px}",""])},47:function(e,t,i){var n=i(1)(i(24),i(55),function(e){i(66)},"data-v-03aeed0e",null);e.exports=n.exports},55:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"v-file-upload"},[i("label",{staticClass:"v-file-name",attrs:{for:e.elemId}},[i("div",{attrs:{title:e.file},domProps:{textContent:e._s(e.file)}})]),e._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:e.selectBtnVisible,expression:"selectBtnVisible"}],staticClass:"v-file-label ml10",attrs:{title:"选择要上传的文件",for:e.elemId},domProps:{textContent:e._s(e.myText)}}),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.sendBtnVisible,expression:"sendBtnVisible"}],staticClass:"send-btn",on:{click:e.checkAndSend}},[e._v("上传")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.errmsgVisible,expression:"errmsgVisible"}],staticClass:"error-msg ml10",domProps:{textContent:e._s(e.errmsg)}}),e._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:e.openFileVisible,expression:"openFileVisible"}],staticClass:"open-file",attrs:{href:e.value,target:"_blank","click-jump":""}},[e._v("查看文件")]),e._v(" "),i("form",{ref:"form",staticStyle:{display:"none"},attrs:{action:e.formAction}},[e._t("default")],2)])},staticRenderFns:[]}},63:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"test-upload"},[i("h4",[e._v("上传测试")]),e._v(" "),i("div",[i("file-upload",{attrs:{action:"http://localhost/upload"}}),e._v(" "),i("file-upload",{attrs:{action:"http://localhost/never"}})],1)])},staticRenderFns:[]}},66:function(e,t,i){var n=i(35);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(2)("1354f411",n,!0,{})},74:function(e,t,i){var n=i(43);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(2)("3bd4b758",n,!0,{})}},[15]);